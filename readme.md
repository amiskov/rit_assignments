# RIT Assignments
## Ð—Ð°Ð´Ð°Ñ‡Ð° 1
âŒ›ï¸ ÐŸÐ¾Ñ‚Ñ€Ð°Ñ‡ÐµÐ½Ð¾: ~8 Ñ‡Ð°ÑÐ¾Ð².

ÐÐ°Ð³Ð»ÑÐ´Ð½Ð¾Ðµ Ð´ÐµÐ¼Ð¾ Ð½Ð° Ð¿Ð¾Ð»Ñ‚Ð¾Ñ€Ñ‹ Ð¼Ð¸Ð½ÑƒÑ‚Ñ‹: https://www.loom.com/share/3ece7a950f684c678fdae3d54d417362

Ð—Ð°Ð¿ÑƒÑÐº Ð¸ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¿Ñ€Ð¾Ñ‰Ðµ Ð²ÑÐµÐ³Ð¾ Ð´ÐµÐ»Ð°Ñ‚ÑŒ Ñ‡ÐµÑ€ÐµÐ· `Makefile`:

- `make run` Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ HTTP-ÑÐµÑ€Ð²ÐµÑ€ Ð½Ð° `http://localhost:8080` Ð¸ ÐºÐ¾Ð½ÑÐ¾Ð»ÑŒ Ð´Ð»Ñ ÐºÐ¾Ð¼Ð°Ð½Ð´ `send` Ð¸ `sendc`. Ð’ Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ðµ Ð¼Ð¾Ð¶Ð½Ð¾ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ð¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÑƒ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ñƒ Ð¸Ð»Ð¸ Ð±Ñ€Ð¾Ð´ÐºÐ°ÑÑ‚ Ñ…Ð°Ð±Ñƒ. ÐŸÐ¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ Ñ€Ð°Ð·Ð¼ÐµÑ€ Ñ…Ð°Ð±Ð° Ñ€Ð°Ð²ÐµÐ½ 3. Ð Ð°Ð·Ð¼ÐµÑ€ Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿Ð¾Ð¼ÐµÐ½ÑÑ‚ÑŒ Ñ„Ð»Ð°Ð³Ð¾Ð¼ `-s`.
- `make test` Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ Ñ‚ÐµÑÑ‚Ñ‹.

ÐŸÐ¾ÑÐ»Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ° ÑÐµÑ€Ð²ÐµÑ€Ð° Ð¼Ð¾Ð¶Ð½Ð¾ Ð²Ð²Ð¾Ð´Ð¸Ñ‚ÑŒ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð² ÐºÐ¾Ð½ÑÐ¾Ð»ÑŒ. ÐÐ¹Ð´Ð¸ÑˆÐ½Ð¸ÐºÐ¸ Ñ…Ð°Ð±Ð¾Ð² Ð¸ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð¾Ð² Ð±ÑƒÐ´ÑƒÑ‚ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒÑÑ Ð² ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸. ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€:

```sh
client 8703bcc6-2dbf-4fc6-b36c-7114e05c57ad was added to hub 5803267d-c693-40c6-824c-fde259b888cc
> send 5803267d-c693-40c6-824c-fde259b888cc  # broadcast to hub
> sendc 8703bcc6-2dbf-4fc6-b36c-7114e05c57ad # send to client
```

## Ð—Ð°Ð´Ð°Ñ‡Ð° 2
âŒ›ï¸ ÐŸÐ¾Ñ‚Ñ€Ð°Ñ‡ÐµÐ½Ð¾: ~3 Ñ‡Ð°ÑÐ°.

Ð ÐµÑˆÐµÐ½Ð¸Ðµ Ð´Ð»Ñ PostgreSQL.

Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° ÑÐ¾Ð·Ð´Ð°Ð´Ð¸Ð¼ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñƒ Ð¸ Ð·Ð°Ð¿Ð¾Ð»Ð½Ð¸Ð¼ ÐµÑ‘ Ð´Ð°Ð½Ð½Ñ‹Ð¼Ð¸ Ð¸Ð· Ð·Ð°Ð´Ð°Ð½Ð¸Ñ:

```sql
CREATE TABLE IF NOT EXISTS timework(
  id SERIAL PRIMARY KEY,
  employee_id INTEGER NOT NULL,
  start_period TIMESTAMPTZ,
  end_period TIMESTAMPTZ
);

INSERT INTO timework (id, employee_id, start_period, end_period)
VALUES  (1, 1, '2021-08-11 12:00:00.000', '2021-08-11 18:00:00.000'),
        (2, 1, '2021-08-12 12:00:00.000', '2021-08-12 18:00:00.000'),
        (3, 1, '2021-08-16 12:00:00.000', '2021-08-16 18:00:00.000'),
        (4, 2, '2021-08-11 12:00:00.000', '2021-08-11 18:00:00.000'),
        (5, 2, '2021-08-14 12:00:00.000', '2021-08-14 18:00:00.000');
```

Ð”Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ° Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ ÐºÐ¾Ñ€Ñ‚ÐµÐ¶ Ñ Ð´Ð½ÑÐ¼Ð¸, ÐºÐ¾Ð³Ð´Ð° Ð¾Ð½ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð»:

```sql
SELECT
  employee_id as employee,
  array_agg(dd::date) as working_days
FROM
  generate_series('2021-08-01', '2021-08-31', '1 day'::interval) as dd
JOIN timework ON
  timework.start_period >= dd
  AND timework.end_period < dd + interval '1' day
GROUP BY employee_id
ORDER BY employee_id;
```

ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ð¼ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñƒ Ð²Ð¸Ð´Ð°:

```
employee | working_days
1        | {2021-08-11,2021-08-12,2021-08-16}
2        | {2021-08-11,2021-08-14}
```

Ð•ÑÐ»Ð¸ Ð½ÑƒÐ¶Ð½Ð¾ Ð½Ð°Ð³Ð»ÑÐ´Ð½ÐµÐµ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð´Ð½Ð¸, Ð° Ð½Ðµ ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ¾Ð², Ñ‚Ð¾ Ð¼Ð¾Ð¶Ð½Ð¾ Ð°Ð³Ñ€ÐµÐ³Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿Ð¾-Ð´Ñ€ÑƒÐ³Ð¾Ð¼Ñƒ:

```sql
SELECT
  date_trunc('day', dd)::date AS day,
  array_agg(employee_id)
    FILTER (WHERE employee_id IS NOT NULL) AS employees
FROM
  generate_series ('2021-08-01', '2021-08-31', '1 day'::interval) AS dd
LEFT JOIN timework ON timework.start_period >= dd
  AND timework.end_period < dd + interval '1' day
GROUP BY dd
ORDER BY day;
```

ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ð¼ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñƒ, Ð³Ð´Ðµ Ð´Ð»Ñ ÐºÐ°Ð´Ð¾Ð³Ð¾ Ð´Ð½Ñ Ð±ÑƒÐ´ÐµÑ‚ Ð¿Ð¾Ð´ÑÑ‚Ð°Ð²Ð»ÐµÐ½ ÐºÐ¾Ñ€Ñ‚ÐµÐ¶ Ñ ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ°Ð¼Ð¸, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð² ÑÑ‚Ð¾Ñ‚ Ð´ÐµÐ½ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð»Ð¸:

```
day        | employees
2021-08-01 |
...
2021-08-10 |
2021-08-11 | {1,2}
2021-08-12 | {1}
2021-08-13 |
2021-08-14 | {2}
2021-08-15 |
2021-08-16 | {1}
2021-08-17 |
...
2021-08-31  
```

Ð•ÑÐ»Ð¸ Ñ‚Ð°Ð±Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ Ð²Ñ‹Ð²Ð¾Ð´ Ð¸Ð· SQL Ð½ÑƒÐ¶ÐµÐ½ Ð¸Ð¼ÐµÐ½Ð½Ð¾ Ñ‚Ð°ÐºÐ¾Ð¹, ÐºÐ°Ðº Ð² Ð·Ð°Ð´Ð°Ð½Ð¸Ð¸, Ð¼Ð¾Ð¶Ð½Ð¾ Ð´Ð¸Ð½Ð°Ð¼Ð¸Ñ‡ÐµÑÐºÐ¸ Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñƒ Ñ Ð¸Ð¼ÐµÐ½Ð°Ð¼Ð¸ ÐºÐ¾Ð»Ð¾Ð½Ð¾Ðº ÐºÐ°Ðº Ð´Ð½Ð¸ Ð¼ÐµÑÑÑ†Ð° Ð¸ Ð´Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð¹ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÑ‚ÑŒ Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ðµ Ñ€Ð°Ð±Ð¾Ñ‡Ð¸Ñ… Ñ‡Ð°ÑÐ¾Ð². ÐÐ¾ Ñƒ Ð¼ÐµÐ½Ñ Ñ‚Ð°Ðº ÑÐ´ÐµÐ»Ð°Ñ‚ÑŒ Ð½Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ð»Ð¾ÑÑŒ Ð·Ð° Ð°Ð´ÐµÐºÐ²Ð°Ñ‚Ð½Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ ðŸ¤·ðŸ»â€â™‚ï¸